
sudo: required
language: java

jdk:
  - oraclejdk8



script:
  - mvn clean cobertura:cobertura -Dtest=AclDAOTest#getSanitizedSecretsForClient -DfailIfNoTests=false

before_deploy:
- tar -zcvf coverage-result.tar.gz /home/travis/build/leusonmario/keywhiz/target/site/cobertura

deploy:
  provider: releases
  api_key:
    secure: "FIvC1E62OpsUG6dKHjTegSZx2qXDMpuy6+WM6zy9qtL0B2p/jYWg1b4287ECzwS+AxPwV3oStDil4AejTygnRsPjxzCk9mBBLP/yYpb+mUzArBeDELwWqj5c0vEQ7rjEilNJeb4PSNl27j6CQGp80TSVNAueQaJUut7N/iDjCZL4FhX4rVGrsvvKfybVe5MRRCqybekPsDkBTbe0YOQaUPQ5MuSMqy1bhhU2rKsC4oa9iaDn4MSkq4cyuIQAfkYEfFhOcRixJBMXWmiLvdG4KbDcl0e3o6uQr5n4Sy9BIhS2tDibghXGtc06rCkkX7GzXNsv6RFzUzs+z68xO2e84zYKQY5MWMdTI/5gIXORIZ/Mo6Wi4mQ9zWLbzWiTkH13aGnS/SwFMnUkktSv5oh8vI2hcCYYnKhMr2Mb+6xDn36zO18OFdpBzCHpsfxhIueEh7dZln9Z4Ps9moS9m0aaqhF/SnO6CTI6up7Dq7zxBPEqa+MRSxFFrkRiZ6mkubEvxxYYN6UQnkYzw7c2cuKJDBHsB4bWxVP6xIU9xIlI7foH14xm0E+mllnMYLqcvVv6ojgm/6r44orBSk/ggUZfjczwFX7Ik7P3LutfrnpWnDZgHLwcTzar7JfqQsRpT6k4OR4zM7ojKYgUXd3LmlpV6gyTkObXF5+5/kITfBirJyo="


  file: coverage-result.tar.gz
  file_glob: true
  overwrite: true
  skip_cleanup: true
  on:
    tags: true
